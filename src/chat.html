<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lia IA — Chat</title>
    <link rel="stylesheet" href="styles/main.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500&family=Montserrat:wght@700;800&display=swap" rel="stylesheet">
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
    <link rel="icon" type="image/x-icon" href="assets/favicon.ico">
    <meta name="description" content="Lia IA: asistente inteligente para una experiencia educativa interactiva y personalizada">
    <meta name="keywords" content="coach lia ia, asistente, educativo, inteligencia artificial, curso">
    <meta name="author" content="Tu Nombre">
</head>
<body class="layout-notebook">
    <div class="layout-3panels">
        <aside class="sidebar-left" id="sidebarLeft">
            <div class="sidebar-header">
                <h3>Herramientas</h3>
                <button class="collapse-btn" id="collapseLeft" title="Ocultar/mostrar">⟨⟩</button>
            </div>
            <nav class="tool-list">

                <div class="tool-group collapsible" id="livestreamSection">
                    <div class="collapsible-header">
                        <h4 style="margin:0">Chat en vivo</h4>
                        <button id="livestreamToggle" class="collapsible-toggle" aria-expanded="false" aria-controls="livestreamContent" title="Mostrar/Ocultar">
                            <i class='bx bx-chevron-down'></i>
                        </button>
                    </div>
                    <div class="collapsible-content" id="livestreamContent">
                        <!-- Chat del Livestream -->
                        <div class="livestream-chat-container">
                            <div class="livestream-chat-header">
                                <h5>Chat en vivo</h5>
                                <span class="users-count" id="livestreamUsersCount">0 usuarios</span>
                            </div>
                            
                            <div class="livestream-chat-messages" id="livestreamChatMessages">
                                <div class="welcome-message">
                                    <i class='bx bx-message-dots'></i>
                                    <span>¡Únete a la conversación!</span>
                                </div>
                            </div>
                            
                            <div class="livestream-chat-input">
                                <input 
                                    type="text" 
                                    id="livestreamMessageInput" 
                                    placeholder="Conectando al chat…"
                                    maxlength="200"
                                >
                                <button id="livestreamSendBtn" class="livestream-send-btn" disabled title="Enviar mensaje">
                                    <i class='bx bx-send'></i>
                                </button>
                            </div>
                            
                            <div class="livestream-connection-status" id="livestreamConnectionStatus">
                                <span class="status-indicator offline"></span>
                                <span class="status-text">Desconectado</span>
                            </div>
                        </div>
                    </div>
                </div>
            </nav>
            <div class="left-resizer" id="leftResizer" title="Ajustar ancho"></div>
        </aside>

        <main class="chat-main">
            <div class="telegram-container">
                <div class="chat-header">
                    <div class="bot-avatar">
                        <img id="botAvatarImg" src="assets/images/FOTO%20LIA.png" alt="Lia IA" onerror="this.onerror=null;this.src='assets/images/brain-icon.jpg'">
                    </div>
                    <div class="chat-info">
                        <h3>Lia IA</h3>
                        <p>En línea</p>
                    </div>
                </div>

                <div class="chat-messages" id="chatMessages">
                    <!-- Los mensajes se generarán dinámicamente aquí -->
                </div>

                <div class="chat-input">
                    <div class="input-container" id="inputContainer" style="position:relative">
                        <button id="sessionMenuButton" class="session-menu-button" aria-label="Menú" title="Menú">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M12 6V18M6 12H18" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                            </svg>
                        </button>
                        <!-- Botón de audio removido a petición del usuario -->
                        <input type="text" id="messageInput" placeholder="Escribe tu mensaje..." maxlength="500">
                        <button id="actionButton" class="action-button" aria-label="Hablar" title="Hablar / Enviar">
                            <svg class="mic-icon" width="22" height="22" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M12 14a3 3 0 0 0 3-3V7a3 3 0 0 0-6 0v4a3 3 0 0 0 3 3z" fill="currentColor"/>
                                <path d="M5 11a7 7 0 0 0 14 0" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                                <path d="M12 18v3" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                            </svg>
                            <svg class="send-icon" width="22" height="22" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z" fill="currentColor"/>
                            </svg>
                        </button>
                    </div>
                    
                    <!-- Panel de selector de sesiones y módulos -->
                    <div class="global-menu" id="globalMenu" aria-hidden="true">
                        <div class="gm-group">
                            <button class="gm-item" data-toggle="sessions">Sesiones</button>
                            <div class="gm-submenu" id="gmSessions">
                                <button class="gm-subitem" data-session="1">Sesión 1</button>
                                <button class="gm-subitem" data-session="2">Sesión 2</button>
                                <button class="gm-subitem" data-session="3">Sesión 3</button>
                                <button class="gm-subitem" data-session="4">Sesión 4</button>
                            </div>
                        </div>
                        <div class="gm-group">
                            <button class="gm-item" data-toggle="reports">Informes</button>
                            <div class="gm-submenu" id="gmReports">
                                <button class="gm-subitem" data-report="docs">Documentos</button>
                                <button class="gm-subitem" data-report="bonos">Bonos</button>
                            </div>
                        </div>
                        <div class="gm-group">
                            <button class="gm-item" onclick="window.location.href='courses.html'">
                                <i class='bx bx-book-open'></i>
                                Mis Cursos
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <aside class="studio-right" id="studioRight">
            <div class="studio-header">
                <h3>Studio</h3>
                <button class="collapse-btn" id="collapseRight" title="Ocultar/mostrar">⟨⟩</button>
            </div>
            
            <div class="studio-cards" id="studioCards"></div>
            <div class="right-resizer" id="rightResizer" title="Ajustar ancho"></div>
        </aside>
    </div>

    <div id="avatarLightbox" class="avatar-lightbox" aria-hidden="true">
        <div class="avatar-lightbox-backdrop"></div>
        <img id="avatarLightboxImg" src="assets/images/FOTO%20LIA.png" alt="Lia IA">
        <button id="avatarLightboxClose" class="avatar-close" aria-label="Cerrar">×</button>
    </div>

    <script src="/socket.io/socket.io.js"></script>
    <script src="scripts/main.js"></script>
</body>
</html>

