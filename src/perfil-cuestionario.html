<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Cuestionario adaptativo de perfil profesional - Aprende y Aplica IA">
    <title>Perfil Profesional - Aprende y Aplica IA</title>
    
    <!-- Favicon -->
    <link rel="icon" type="image/png" href="assets/images/icono.png" />
    
    <!-- Styles -->
    <link rel="stylesheet" href="styles/main.css">
    <link rel="stylesheet" href="styles/animations.css">
    <link rel="stylesheet" href="styles/components.css">
    <link rel="stylesheet" href="styles/profile.css">
    <link rel="stylesheet" href="styles/responsive.css">
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@700;800&family=Inter:wght@400;500&display=swap" rel="stylesheet">
    
    <!-- Boxicons para iconos -->
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>

    <meta name="supabase-url" content="https://miwbzotcuaywpdbidpwo.supabase.co">
    <meta name="supabase-key" content="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1pd2J6b3RjdWF5d3BkYmlkcHdvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQ2MTEyMjksImV4cCI6MjA3MDE4NzIyOX0.IKXYAe1JBFc_pcaS6OjxKUVJePwnfHgc0sRO6WpJSBY">

    <!-- Global Theme Setup -->
    <script src="scripts/global-theme-setup.js"></script>
</head>
<body class="bg-glow-global">
    <!-- Fondo con partículas -->
    <div class="particles-container"></div>

    <!-- Header limpio sin botón de perfil -->
    <header class="profile-header">
        <nav class="hero-nav">
            <!-- Botón de cambio de tema -->
            <button class="theme-toggle-btn" title="Cambiar tema">
                <svg class="theme-icon-sun" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="12" cy="12" r="5"></circle>
                    <line x1="12" y1="1" x2="12" y2="3"></line>
                    <line x1="12" y1="21" x2="12" y2="23"></line>
                    <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                    <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                    <line x1="1" y1="12" x2="3" y2="12"></line>
                    <line x1="21" y1="12" x2="23" y2="12"></line>
                    <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                    <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                </svg>
                <svg class="theme-icon-moon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                </svg>
            </button>
        </nav>
    </header>

    <!-- Contenido Principal -->
    <main class="profile-main">
        <div class="container">
            <!-- Paso 1: Formulario de Perfil -->
            <section id="step-profile" class="profile-step active">
                <div class="step-content">
                    <div class="step-header animate-on-scroll">
                        <h1>Personaliza tu experiencia de aprendizaje</h1>
                        <p>Compártenos algunos datos sobre tu perfil profesional para personalizar tu experiencia de aprendizaje.</p>
                    </div>

                    <form id="profileForm" class="profile-form animate-on-scroll">
                        <div class="form-grid">
                            <!-- Cargo/Título -->
                            <div class="form-group">
                                <label for="cargo" class="form-label">
                                    <span>Cargo / Título *</span>
                                </label>
                                <input 
                                    type="text" 
                                    id="cargo" 
                                    name="cargo" 
                                    class="form-input" 
                                    placeholder="Ej: Gerente de Marketing, CEO, Desarrollador..."
                                    required
                                >
                            </div>

                            <!-- Área Funcional -->
                            <div class="form-group">
                                <label for="area" class="form-label">
                                    <span>Área Funcional *</span>
                                </label>
                                <select id="area" name="area" class="form-select" required>
                                    <option value="">Selecciona tu área</option>
                                    <option value="Ventas">Ventas</option>
                                    <option value="Marketing">Marketing</option>
                                    <option value="Operaciones">Operaciones</option>
                                    <option value="Finanzas">Finanzas</option>
                                    <option value="RRHH">Recursos Humanos</option>
                                    <option value="Contabilidad">Contabilidad</option>
                                    <option value="Compras/Supply">Compras/Supply Chain</option>
                                    <option value="Tecnología/TI">Tecnología/TI</option>
                                    <option value="Otra">Otra</option>
                                </select>
                            </div>

                            <!-- Nivel -->
                            <div class="form-group">
                                <label for="nivel" class="form-label">
                                    <span>Nivel Organizacional *</span>
                                </label>
                                <select id="nivel" name="nivel" class="form-select" required>
                                    <option value="">Selecciona tu nivel</option>
                                    <option value="Dirección General">Dirección General</option>
                                    <option value="Dirección de Área">Dirección de Área</option>
                                    <option value="Gerencia">Gerencia</option>
                                    <option value="Miembro/Colaborador">Miembro/Colaborador</option>
                                </select>
                            </div>

                            <!-- Tipo de Relación -->
                            <div class="form-group">
                                <label for="relacion" class="form-label">
                                    <span>Tipo de Relación *</span>
                                </label>
                                <select id="relacion" name="relacion" class="form-select" required>
                                    <option value="">Selecciona tu relación</option>
                                    <option value="Empleado(a)">Empleado(a)</option>
                                    <option value="Consultor(a) externo">Consultor(a) externo</option>
                                    <option value="Freelancer / Independiente">Freelancer / Independiente</option>
                                </select>
                            </div>

                            <!-- Sector (Opcional) -->
                            <div class="form-group">
                                <label for="sector" class="form-label">
                                    <span>Sector (Opcional)</span>
                                </label>
                                <input 
                                    type="text" 
                                    id="sector" 
                                    name="sector" 
                                    class="form-input" 
                                    placeholder="Ej: Tecnología, Salud, Educación..."
                                >
                            </div>

                            <!-- Tamaño de empresa (Opcional) -->
                            <div class="form-group">
                                <label for="tamano" class="form-label">
                                    <span>Tamaño de Empresa (Opcional)</span>
                                </label>
                                <select id="tamano" name="tamano" class="form-select">
                                    <option value="">Selecciona el tamaño</option>
                                    <option value="Startup (1-10)">Startup (1-10 empleados)</option>
                                    <option value="Pequeña (11-50)">Pequeña (11-50 empleados)</option>
                                    <option value="Mediana (51-250)">Mediana (51-250 empleados)</option>
                                    <option value="Grande (251-1000)">Grande (251-1000 empleados)</option>
                                    <option value="Corporación (1000+)">Corporación (1000+ empleados)</option>
                                </select>
                            </div>
                        </div>

                        <div class="form-actions">
                            <button type="submit" class="btn-primary btn-large">
                                <span>Analizar Perfil</span>
                            </button>
                        </div>
                    </form>
                </div>
            </section>

            <!-- Paso 2: Resumen y Confirmación -->
            <section id="step-summary" class="profile-step">
                <div class="step-content">
                    <div class="step-header animate-on-scroll">
                        <h1>Perfil Recomendado</h1>
                        <p>Basado en la información proporcionada, este es el cuestionario que mejor se adapta a tu perfil:</p>
                    </div>

                    <div class="profile-summary animate-on-scroll">
                        <div class="summary-card glass-card">
                            <div class="summary-header">
                                <div class="summary-icon">
                                    <img src="assets/icons/tools.svg" alt="Perfil" class="icon">
                                </div>
                                <div class="summary-info">
                                    <h3 id="selectedProfile">Perfil Detectado</h3>
                                    <p id="profileDescription">Descripción del perfil</p>
                                </div>
                            </div>

                            <div class="summary-details">
                                <div class="detail-row">
                                    <span class="detail-label">Cargo:</span>
                                    <span id="summaryCargoValue">-</span>
                                </div>
                                <div class="detail-row">
                                    <span class="detail-label">Área:</span>
                                    <span id="summaryAreaValue">-</span>
                                </div>
                                <div class="detail-row">
                                    <span class="detail-label">Nivel:</span>
                                    <span id="summaryNivelValue">-</span>
                                </div>
                                <div class="detail-row">
                                    <span class="detail-label">Relación:</span>
                                    <span id="summaryRelacionValue">-</span>
                                </div>
                                <div class="detail-row" id="summaryEmailRow">
                                    <span class="detail-label">Correo:</span>
                                    <span id="summaryEmailValue">-</span>
                                </div>
                            </div>
                        </div>

                        <!-- Override Section -->
                        <div class="override-section">
                            <button id="toggleOverride" class="btn-secondary">
                                ¿No es tu perfil? Selecciona manualmente
                            </button>
                            
                            <div id="overrideOptions" class="override-options" style="display: none;">
                                <h4>Selecciona tu perfil manualmente:</h4>
                                <div class="profile-grid">
                                    <button class="profile-option" data-profile="CEO">CEO (personal)</button>
                                    <button class="profile-option" data-profile="CTO/CIO">CTO/CIO</button>
                                    <button class="profile-option" data-profile="Dirección de Ventas">Dirección de Ventas</button>
                                    <button class="profile-option" data-profile="Miembros de Ventas">Miembros de Ventas</button>
                                    <button class="profile-option" data-profile="Dirección de Marketing">Dirección de Marketing</button>
                                    <button class="profile-option" data-profile="Miembros de Marketing">Miembros de Marketing</button>
                                    <button class="profile-option" data-profile="Dirección de Operaciones">Dirección de Operaciones</button>
                                    <button class="profile-option" data-profile="Miembros de Operaciones">Miembros de Operaciones</button>
                                    <button class="profile-option" data-profile="Dirección de Finanzas (CFO)">Dirección de Finanzas (CFO)</button>
                                    <button class="profile-option" data-profile="Miembros de Finanzas">Miembros de Finanzas</button>
                                    <button class="profile-option" data-profile="Dirección de RRHH">Dirección de RRHH</button>
                                    <button class="profile-option" data-profile="Miembros de RRHH">Miembros de RRHH</button>
                                    <button class="profile-option" data-profile="Dirección/Jefatura de Contabilidad">Dirección/Jefatura de Contabilidad</button>
                                    <button class="profile-option" data-profile="Miembros de Contabilidad">Miembros de Contabilidad</button>
                                    <button class="profile-option" data-profile="Dirección de Compras / Supply">Dirección de Compras / Supply</button>
                                    <button class="profile-option" data-profile="Miembros de Compras">Miembros de Compras</button>
                                    <button class="profile-option" data-profile="Gerencia Media">Gerencia Media</button>
                                    <button class="profile-option" data-profile="Freelancer">Freelancer</button>
                                    <button class="profile-option" data-profile="Consultor">Consultor</button>
                                </div>
                            </div>
                        </div>

                        <div class="summary-actions">
                            <button id="startQuestionnaire" class="btn-primary btn-large">
                                <span>Comenzar Cuestionario</span>
                                <span class="btn-icon">→</span>
                            </button>
                            <button id="backToForm" class="btn-secondary">Modificar Información</button>
                        </div>
                    </div>
                </div>
            </section>
        </div>
    </main>

    <!-- Scripts -->
    <script src="scripts/supabase-client.js"></script>
    <script src="scripts/particles.js"></script>
    <script src="scripts/perfil-cuestionario.js"></script>

    <!-- Script de funcionalidad del botón de tema -->
    <script>
        function toggleTheme() {
            console.log('🔄 Cambiando tema...');
            const currentTheme = document.documentElement.getAttribute('data-theme') || 'dark';
            const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
            document.documentElement.setAttribute('data-theme', newTheme);
            localStorage.setItem('theme', newTheme);
            console.log('✅ Tema cambiado a:', newTheme);
        }
        window.toggleTheme = toggleTheme; // Make it globally available
        document.addEventListener('DOMContentLoaded', function() {
            const savedTheme = localStorage.getItem('theme') || 'dark';
            document.documentElement.setAttribute('data-theme', savedTheme);
            console.log('🎨 Tema inicial aplicado:', savedTheme);
            const themeBtn = document.querySelector('.theme-toggle-btn');
            if (themeBtn) {
                themeBtn.removeAttribute('onclick'); // Remove inline onclick
                themeBtn.addEventListener('click', function(e) {
                    e.preventDefault();
                    e.stopPropagation();
                    console.log('🖱️ Botón de tema clickeado');
                    toggleTheme();
                });
                console.log('✅ Evento de click agregado al botón de tema');
            } else {
                console.error('❌ No se encontró el botón de tema');
            }
        });
        console.log('🔧 Script de tema cargado');
        setTimeout(() => {
            const btn = document.querySelector('.theme-toggle-btn');
            if (btn) {
                console.log('✅ Botón encontrado:', btn);
                console.log('✅ Función toggleTheme disponible:', typeof toggleTheme);
            } else {
                console.error('❌ Botón no encontrado');
            }
        }, 1000);
    </script>
</body>
</html>