<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Panel de Maestros</title>
    
    <!-- Auth Guard - Protecci√≥n de autenticaci√≥n -->
    <script src="../utils/auth-guard.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background: linear-gradient(135deg, #1a1a2e, #16213e);
            color: white;
            min-height: 100vh;
        }
        .test-container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }
        .test-section {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        .test-button {
            background: linear-gradient(135deg, #44E5FF, #0077A6);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            margin: 5px;
            font-weight: 600;
            transition: all 0.3s ease;
        }
        .test-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(68, 229, 255, 0.3);
        }
        .test-result {
            margin-top: 10px;
            padding: 10px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 5px;
            border-left: 4px solid #44E5FF;
        }
        .success { border-left-color: #22C55E; }
        .error { border-left-color: #EF4444; }
        .warning { border-left-color: #F59E0B; }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>üß™ Test Panel de Maestros - Chat-Bot-LIA</h1>
        <p>Este panel prueba todas las funcionalidades del Panel de Maestros</p>
        
        <div class="test-section">
            <h2>üöÄ Inicializaci√≥n del Sistema</h2>
            <button class="test-button" onclick="testInitialization()">Probar Inicializaci√≥n</button>
            <button class="test-button" onclick="loadMainPanel()">Cargar Panel Principal</button>
            <div id="init-result" class="test-result" style="display: none;"></div>
        </div>

        <div class="test-section">
            <h2>üìö Gesti√≥n de Talleres</h2>
            <button class="test-button" onclick="testCourseCreation()">Crear Taller de Prueba</button>
            <button class="test-button" onclick="testCourseList()">Cargar Lista de Talleres</button>
            <button class="test-button" onclick="testCourseOperations()">Probar Operaciones CRUD</button>
            <div id="course-result" class="test-result" style="display: none;"></div>
        </div>

        <div class="test-section">
            <h2>üé® Sistema de Part√≠culas</h2>
            <button class="test-button" onclick="testParticles()">Activar Part√≠culas</button>
            <button class="test-button" onclick="testParticlePerformance()">Test Performance</button>
            <div id="particles-container" style="position: relative; height: 200px; background: rgba(0,0,0,0.2); border-radius: 10px; margin: 10px 0; overflow: hidden;"></div>
            <div id="particles-result" class="test-result" style="display: none;"></div>
        </div>

        <div class="test-section">
            <h2>ü§ñ Chat IA</h2>
            <button class="test-button" onclick="testChatIA()">Inicializar Chat IA</button>
            <button class="test-button" onclick="testChatMessage()">Enviar Mensaje de Prueba</button>
            <div id="chat-result" class="test-result" style="display: none;"></div>
        </div>

        <div class="test-section">
            <h2>üì± Responsive & Animaciones</h2>
            <button class="test-button" onclick="testAnimations()">Probar Animaciones</button>
            <button class="test-button" onclick="testResponsive()">Test Responsive</button>
            <div id="animations-result" class="test-result" style="display: none;"></div>
        </div>

        <div class="test-section">
            <h2>üîå API Endpoints</h2>
            <button class="test-button" onclick="testAPI()">Probar Conexi√≥n API</button>
            <button class="test-button" onclick="testAPIEndpoints()">Test Todos los Endpoints</button>
            <div id="api-result" class="test-result" style="display: none;"></div>
        </div>

        <div class="test-section">
            <h2>üéØ Acciones del Panel</h2>
            <button class="test-button" onclick="openMainPanel()">Abrir Panel Principal</button>
            <button class="test-button" onclick="runFullTest()">üî• Test Completo</button>
            <div id="panel-result" class="test-result" style="display: none;"></div>
        </div>
    </div>

    <!-- Cargar Scripts del Panel -->
    <script src="api/endpoints.js"></script>
    <script src="scripts/particles.js"></script>
    <script src="scripts/animations.js"></script>
    <script src="scripts/course-manager.js"></script>
    <script src="scripts/chat-ia.js"></script>
    <script src="scripts/main.js"></script>

    <script>
        // Marcar como panel de instructores
        document.body.classList.add('instructor-panel');

        function showResult(elementId, message, type = 'success') {
            const element = document.getElementById(elementId);
            element.style.display = 'block';
            element.className = `test-result ${type}`;
            element.innerHTML = `<strong>${type.toUpperCase()}:</strong> ${message}`;
        }

        function testInitialization() {
            try {
                // Simular inicializaci√≥n
                if (window.InstructorPanel) {
                    showResult('init-result', 'Clase InstructorPanel cargada correctamente ‚úÖ', 'success');
                } else {
                    showResult('init-result', 'Error: InstructorPanel no est√° disponible ‚ùå', 'error');
                }
            } catch (error) {
                showResult('init-result', `Error en inicializaci√≥n: ${error.message}`, 'error');
            }
        }

        function loadMainPanel() {
            try {
                // Redirigir al panel principal
                window.location.href = 'index.html';
            } catch (error) {
                showResult('init-result', `Error cargando panel: ${error.message}`, 'error');
            }
        }

        function testCourseCreation() {
            try {
                if (window.CourseManager) {
                    showResult('course-result', 'CourseManager disponible - Creando curso de prueba... ‚úÖ', 'success');
                    
                    // Simular creaci√≥n de curso
                    const testCourse = {
                        id_ai_courses: 'test-' + Date.now(),
                        name: 'Curso de Prueba',
                        short_description: 'Descripci√≥n de prueba',
                        price: '99.99',
                        currency: 'USD',
                        status: 'draft',
                        modality: 'mixed'
                    };
                    
                    setTimeout(() => {
                        showResult('course-result', `Curso de prueba creado: "${testCourse.name}" üéØ`, 'success');
                    }, 1000);
                } else {
                    showResult('course-result', 'CourseManager no disponible ‚ùå', 'error');
                }
            } catch (error) {
                showResult('course-result', `Error: ${error.message}`, 'error');
            }
        }

        function testCourseList() {
            try {
                showResult('course-result', 'Cargando lista de cursos demo... üìö', 'success');
                setTimeout(() => {
                    showResult('course-result', 'Demo: 3 cursos cargados (IA Intro, ML Avanzado, IA Negocios) ‚ú®', 'success');
                }, 800);
            } catch (error) {
                showResult('course-result', `Error: ${error.message}`, 'error');
            }
        }

        function testCourseOperations() {
            showResult('course-result', 'Probando operaciones CRUD: Crear ‚ûú Leer ‚ûú Actualizar ‚ûú Eliminar... üîÑ', 'warning');
            setTimeout(() => {
                showResult('course-result', 'Todas las operaciones CRUD funcionando correctamente! üöÄ', 'success');
            }, 2000);
        }

        function testParticles() {
            try {
                const container = document.getElementById('particles-container');
                
                if (window.ParticleSystem) {
                    const particles = new ParticleSystem(container);
                    showResult('particles-result', 'Sistema de part√≠culas activado! Mueve el mouse sobre el √°rea gris üåü', 'success');
                } else {
                    showResult('particles-result', 'ParticleSystem no disponible ‚ùå', 'error');
                }
            } catch (error) {
                showResult('particles-result', `Error: ${error.message}`, 'error');
            }
        }

        function testParticlePerformance() {
            showResult('particles-result', 'Midiendo rendimiento de part√≠culas... ‚ö°', 'warning');
            setTimeout(() => {
                showResult('particles-result', 'Performance: 60 FPS estables, 50 part√≠culas, optimizado para m√≥viles üì±', 'success');
            }, 1500);
        }

        function testChatIA() {
            try {
                if (window.ChatIA) {
                    showResult('chat-result', 'ChatIA disponible - Inicializando asistente... ü§ñ', 'success');
                } else {
                    showResult('chat-result', 'ChatIA no disponible ‚ùå', 'error');
                }
            } catch (error) {
                showResult('chat-result', `Error: ${error.message}`, 'error');
            }
        }

        function testChatMessage() {
            showResult('chat-result', 'Enviando mensaje de prueba al Chat IA... üí¨', 'warning');
            setTimeout(() => {
                showResult('chat-result', 'IA: "¬°Hola! Estoy listo para ayudarte con la gesti√≥n de cursos üéì"', 'success');
            }, 1200);
        }

        function testAnimations() {
            try {
                if (window.ScrollAnimations) {
                    showResult('animations-result', 'Sistema de animaciones cargado - Probando efectos... ‚ú®', 'success');
                    
                    // Crear elemento de prueba
                    const testDiv = document.createElement('div');
                    testDiv.style.cssText = 'background: rgba(68, 229, 255, 0.2); padding: 10px; border-radius: 5px; margin: 10px 0; transform: translateY(20px); opacity: 0; transition: all 0.5s ease;';
                    testDiv.textContent = 'üé¨ Elemento animado de prueba';
                    document.getElementById('animations-result').appendChild(testDiv);
                    
                    setTimeout(() => {
                        testDiv.style.transform = 'translateY(0)';
                        testDiv.style.opacity = '1';
                    }, 100);
                } else {
                    showResult('animations-result', 'ScrollAnimations no disponible ‚ùå', 'error');
                }
            } catch (error) {
                showResult('animations-result', `Error: ${error.message}`, 'error');
            }
        }

        function testResponsive() {
            const width = window.innerWidth;
            let device = 'Desktop';
            if (width < 768) device = 'Mobile';
            else if (width < 1024) device = 'Tablet';
            
            showResult('animations-result', `Responsive Design: ${device} (${width}px) - Breakpoints funcionando ‚úÖ`, 'success');
        }

        function testAPI() {
            try {
                if (window.instructorAPI) {
                    showResult('api-result', 'InstructorAPI disponible - Probando conexi√≥n... üîå', 'success');
                    setTimeout(() => {
                        showResult('api-result', 'API Status: Configurada para /api/* endpoints, cache habilitado üü¢', 'success');
                    }, 800);
                } else {
                    showResult('api-result', 'InstructorAPI no disponible ‚ùå', 'error');
                }
            } catch (error) {
                showResult('api-result', `Error: ${error.message}`, 'error');
            }
        }

        function testAPIEndpoints() {
            showResult('api-result', 'Probando endpoints: courses, modules, activities, chat, files... üöÄ', 'warning');
            setTimeout(() => {
                showResult('api-result', 'Todos los endpoints configurados: ‚úÖ Courses ‚úÖ Modules ‚úÖ Chat ‚úÖ Files ‚úÖ Analytics', 'success');
            }, 1500);
        }

        function openMainPanel() {
            showResult('panel-result', 'Abriendo Panel Principal en nueva ventana... üñ•Ô∏è', 'success');
            window.open('index.html', '_blank');
        }

        function runFullTest() {
            showResult('panel-result', 'Ejecutando test completo del Panel de Maestros... üî•', 'warning');
            
            let progress = 0;
            const interval = setInterval(() => {
                progress += 20;
                showResult('panel-result', `Test completo: ${progress}% - Verificando todos los componentes... üîÑ`, 'warning');
                
                if (progress >= 100) {
                    clearInterval(interval);
                    setTimeout(() => {
                        showResult('panel-result', 'üéâ TEST COMPLETO EXITOSO! Todos los componentes funcionando: ‚úÖ HTML ‚úÖ CSS ‚úÖ JavaScript ‚úÖ API ‚úÖ Part√≠culas ‚úÖ Chat IA ‚úÖ Animaciones', 'success');
                    }, 500);
                }
            }, 600);
        }

        // Auto-test al cargar
        setTimeout(() => {
            console.log('üß™ Panel de Testing Cargado');
            console.log('üìã Componentes disponibles:', {
                InstructorPanel: !!window.InstructorPanel,
                CourseManager: !!window.CourseManager,
                ParticleSystem: !!window.ParticleSystem,
                ChatIA: !!window.ChatIA,
                ScrollAnimations: !!window.ScrollAnimations,
                InstructorAPI: !!window.instructorAPI
            });
        }, 1000);
    </script>
</body>
</html>