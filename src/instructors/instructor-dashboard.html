<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Panel de Maestros - Aprende y Aplica</title>
    
    <!-- Credenciales de Supabase -->
    <meta name="supabase-url" content="https://miwbzotcuaywpdbidpwo.supabase.co">
    <meta name="supabase-key" content="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1pd2J6b3RjdWF5d3BkYmlkcHdvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQ2MTEyMjksImV4cCI6MjA3MDE4NzIyOX0.IKXYAe1JBFc_pcaS6OjxKUVJePwnfHgc0sRO6WpJSBY">
    
    <link rel="stylesheet" href="styles/instructor-dashboard.css">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700;800&family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
    <link rel="icon" type="image/png" href="../assets/images/icono.png">
    
    <!-- Global theme setup -->
    <script src="../scripts/global-theme-setup.js"></script>
</head>
<body>
    <!-- Partículas de fondo -->
    <div class="particles-container">
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
    </div>

    <!-- Botón de cambio de tema -->
    <button class="theme-toggle-btn" onclick="toggleTheme()" title="Cambiar tema">
        <svg class="theme-icon-sun" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="5"></circle>
            <line x1="12" y1="1" x2="12" y2="3"></line>
            <line x1="12" y1="21" x2="12" y2="23"></line>
            <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
            <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
            <line x1="1" y1="12" x2="3" y2="12"></line>
            <line x1="21" y1="12" x2="23" y2="12"></line>
            <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
            <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
        </svg>
        <svg class="theme-icon-moon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
        </svg>
    </button>

    <!-- Contenedor principal -->
    <div class="dashboard-container">
        <!-- Menú lateral -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <div class="brand">
                    <img src="../assets/images/icono.png" alt="Aprende y Aplica" class="brand-icon">
                    <span class="brand-text">Panel Maestros</span>
                </div>
                <button class="sidebar-toggle" id="sidebarToggle">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="3" y1="6" x2="21" y2="6"></line>
                        <line x1="3" y1="12" x2="21" y2="12"></line>
                        <line x1="3" y1="18" x2="21" y2="18"></line>
                    </svg>
                </button>
            </div>

            <nav class="sidebar-nav">
                <ul class="nav-list">
                    <li class="nav-item">
                        <a href="#dashboard" class="nav-link active" data-section="dashboard">
                            <svg class="nav-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <rect x="3" y="3" width="7" height="7"></rect>
                                <rect x="14" y="3" width="7" height="7"></rect>
                                <rect x="14" y="14" width="7" height="7"></rect>
                                <rect x="3" y="14" width="7" height="7"></rect>
                            </svg>
                            <span>Dashboard</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#courses" class="nav-link" data-section="courses">
                            <svg class="nav-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"></path>
                                <path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"></path>
                            </svg>
                            <span>Mis Cursos</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#create-course" class="nav-link" data-section="create-course">
                            <svg class="nav-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <line x1="12" y1="5" x2="12" y2="19"></line>
                                <line x1="5" y1="12" x2="19" y2="12"></line>
                            </svg>
                            <span>Crear Curso</span>
                        </a>
                    </li>
                </ul>
            </nav>

            <div class="sidebar-footer">
                <div class="user-info">
                    <div class="user-avatar">
                        <img src="../assets/images/default-avatar.png" alt="Avatar" id="userAvatar">
                    </div>
                    <div class="user-details">
                        <span class="user-name" id="userName">Maestro</span>
                        <span class="user-role">Instructor</span>
                    </div>
                </div>
                <button class="logout-btn" onclick="logout()">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
                        <polyline points="16,17 21,12 16,7"></polyline>
                        <line x1="21" y1="12" x2="9" y2="12"></line>
                    </svg>
                    <span>Cerrar Sesión</span>
                </button>
            </div>
        </aside>

        <!-- Contenido principal -->
        <main class="main-content">
            <!-- Header -->
            <header class="main-header">
                <div class="header-content">
                    <h1 class="page-title" id="pageTitle">Dashboard</h1>
                    <div class="header-actions">
                        <button class="notification-btn" id="notificationBtn">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path>
                                <path d="M13.73 21a2 2 0 0 1-3.46 0"></path>
                            </svg>
                            <span class="notification-badge">3</span>
                        </button>
                    </div>
                </div>
            </header>

            <!-- Contenido de las secciones -->
            <div class="content-wrapper">
                <!-- Sección Dashboard -->
                <section id="dashboard" class="content-section active">
                    <div class="dashboard-grid">
                        <!-- Tarjetas de estadísticas -->
                        <div class="stats-grid">
                            <div class="stat-card">
                                <div class="stat-icon">
                                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"></path>
                                        <path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"></path>
                                    </svg>
                                </div>
                                <div class="stat-content">
                                    <h3 class="stat-number" id="totalCourses">0</h3>
                                    <p class="stat-label">Cursos Totales</p>
                                </div>
                            </div>

                            <div class="stat-card">
                                <div class="stat-icon">
                                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                                        <circle cx="9" cy="7" r="4"></circle>
                                        <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
                                        <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
                                    </svg>
                                </div>
                                <div class="stat-content">
                                    <h3 class="stat-number" id="totalStudents">0</h3>
                                    <p class="stat-label">Estudiantes</p>
                                </div>
                            </div>

                            <div class="stat-card">
                                <div class="stat-icon">
                                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                                        <polyline points="14,2 14,8 20,8"></polyline>
                                        <line x1="16" y1="13" x2="8" y2="13"></line>
                                        <line x1="16" y1="17" x2="8" y2="17"></line>
                                        <polyline points="10,9 9,9 8,9"></polyline>
                                    </svg>
                                </div>
                                <div class="stat-content">
                                    <h3 class="stat-number" id="totalLessons">0</h3>
                                    <p class="stat-label">Lecciones</p>
                                </div>
                            </div>

                            <div class="stat-card">
                                <div class="stat-icon">
                                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
                                        <polyline points="22,4 12,14.01 9,11.01"></polyline>
                                    </svg>
                                </div>
                                <div class="stat-content">
                                    <h3 class="stat-number" id="completionRate">0%</h3>
                                    <p class="stat-label">Tasa de Finalización</p>
                                </div>
                            </div>
                        </div>

                        <!-- Gráficos y análisis -->
                        <div class="analytics-grid">
                            <div class="chart-card">
                                <h3>Actividad Reciente</h3>
                                <div class="chart-container">
                                    <canvas id="activityChart"></canvas>
                                </div>
                            </div>

                            <div class="chart-card">
                                <h3>Distribución de Cursos</h3>
                                <div class="chart-container">
                                    <canvas id="coursesChart"></canvas>
                                </div>
                            </div>
                        </div>

                        <!-- Cursos recientes -->
                        <div class="recent-courses">
                            <h3>Cursos Recientes</h3>
                            <div class="courses-list" id="recentCoursesList">
                                <!-- Los cursos se cargarán dinámicamente -->
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Sección Mis Cursos -->
                <section id="courses" class="content-section">
                    <div class="courses-header">
                        <h2>Mis Cursos</h2>
                        <button class="btn-primary" onclick="showCreateCourse()">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <line x1="12" y1="5" x2="12" y2="19"></line>
                                <line x1="5" y1="12" x2="19" y2="12"></line>
                            </svg>
                            Nuevo Curso
                        </button>
                    </div>

                    <div class="courses-grid" id="coursesGrid">
                        <!-- Los cursos se cargarán dinámicamente -->
                    </div>
                </section>

                <!-- Sección Crear Curso -->
                <section id="create-course" class="content-section">
                    <div class="create-course-container">
                        <h2>Crear Nuevo Curso</h2>
                        <form id="createCourseForm" class="course-form">
                            <div class="form-grid">
                                <div class="form-group">
                                    <label for="courseTitle">Título del Curso</label>
                                    <input type="text" id="courseTitle" name="title" required placeholder="Introduce el título del curso">
                                </div>

                                <div class="form-group">
                                    <label for="courseCategory">Categoría</label>
                                    <select id="courseCategory" name="category" required>
                                        <option value="">Selecciona una categoría</option>
                                        <option value="programacion">Programación</option>
                                        <option value="diseno">Diseño</option>
                                        <option value="marketing">Marketing</option>
                                        <option value="negocios">Negocios</option>
                                        <option value="tecnologia">Tecnología</option>
                                    </select>
                                </div>

                                <div class="form-group full-width">
                                    <label for="courseDescription">Descripción</label>
                                    <textarea id="courseDescription" name="description" rows="4" required placeholder="Describe el contenido y objetivos del curso"></textarea>
                                </div>

                                <div class="form-group">
                                    <label for="courseLevel">Nivel</label>
                                    <select id="courseLevel" name="level" required>
                                        <option value="">Selecciona el nivel</option>
                                        <option value="beginner">Principiante</option>
                                        <option value="intermediate">Intermedio</option>
                                        <option value="advanced">Avanzado</option>
                                    </select>
                                </div>

                                <div class="form-group">
                                    <label for="courseDuration">Duración (horas)</label>
                                    <input type="number" id="courseDuration" name="duration" min="1" required placeholder="Ej: 10">
                                </div>

                                <div class="form-group full-width">
                                    <label for="courseImage">Imagen del Curso</label>
                                    <div class="file-upload">
                                        <input type="file" id="courseImage" name="image" accept="image/*">
                                        <div class="upload-area">
                                            <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                                                <polyline points="7,10 12,15 17,10"></polyline>
                                                <line x1="12" y1="15" x2="12" y2="3"></line>
                                            </svg>
                                            <p>Arrastra una imagen o haz clic para seleccionar</p>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="form-actions">
                                <button type="button" class="btn-secondary" onclick="cancelCreate()">Cancelar</button>
                                <button type="submit" class="btn-primary">Crear Curso</button>
                            </div>
                        </form>
                    </div>
                </section>
            </div>
        </main>
    </div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="scripts/instructor-dashboard.js"></script>
</body>
</html>
