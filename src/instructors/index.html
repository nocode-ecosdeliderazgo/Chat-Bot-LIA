<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Panel de Maestros</title>
    
    <!-- Supabase Configuration -->
    <meta name="supabase-url" content="https://miwbzotcuaywpdbidpwo.supabase.co">
    <meta name="supabase-key" content="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1pd2J6b3RjdWF5d3BkYmlkcHdvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQ2MTEyMjksImV4cCI6MjA3MDE4NzIyOX0.IKXYAe1JBFc_pcaS6OjxKUVJePwnfHgc0sRO6WpJSBY">
    
    <!-- Estilos -->
    <link rel="stylesheet" href="../styles/main.css">
    <link rel="stylesheet" href="../styles/components.css">
    <link rel="stylesheet" href="../styles/animations.css">
    <link rel="stylesheet" href="../styles/responsive.css">
    <link rel="stylesheet" href="styles/panel-layout.css">
    <link rel="stylesheet" href="styles/content-types.css">
    
    <!-- Fuentes -->
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700;800&family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
    
    <!-- Auth Guard -->
    <script src="../utils/auth-guard.js"></script>
    
    <!-- Supabase Client -->
    <script src="../scripts/supabase-client.js"></script>
</head>
<body>
    <!-- Panel Container -->
    <div class="panel-container">
        <!-- Sidebar -->
        <aside class="sidebar">
            <!-- Header del Sidebar -->
            <div class="sidebar-header">
                <div class="sidebar-logo">
                    <svg width="32" height="32" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M12 2L2 7L12 12L22 7L12 2Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M2 17L12 22L22 17" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M2 12L12 17L22 12" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    <span>Panel de Maestros</span>
                </div>
            </div>

            <!-- Navegación -->
            <nav class="sidebar-nav">
                <ul class="nav-menu">
                    <li class="nav-item">
                        <a href="#" class="nav-link active" data-section="dashboard">
                            <svg class="nav-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <rect x="3" y="3" width="7" height="7" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                <rect x="14" y="3" width="7" height="7" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                <rect x="14" y="14" width="7" height="7" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                <rect x="3" y="14" width="7" height="7" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                            <span>Dashboard</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="nav-link" data-section="courses">
                            <svg class="nav-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M22 10V6C22 4.9 21.1 4 20 4H4C2.9 4 2 4.9 2 6V10C3.1 10 4 10.9 4 12C4 13.1 3.1 14 2 14V18C2 19.1 2.9 20 4 20H20C21.1 20 22 19.1 22 18V14C20.9 14 20 13.1 20 12C20 10.9 20.9 10 22 10Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                <path d="M6 6H18V10H6V6Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                <path d="M6 14H18V18H6V14Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                            <span>Mis Cursos</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="nav-link" data-section="create-course">
                            <svg class="nav-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M12 5V19" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                <path d="M5 12H19" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                            <span>Crear Curso</span>
                        </a>
                    </li>
                </ul>
            </nav>

            <!-- Footer del Sidebar -->
            <div class="sidebar-footer">
                <button class="logout-btn" id="logoutBtn">
                    <svg class="logout-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M9 21H5C4.46957 21 3.96086 20.7893 3.58579 20.4142C3.21071 20.0391 3 19.5304 3 19V5C3 4.46957 3.21071 3.96086 3.58579 3.58579C3.96086 3.21071 4.46957 3 5 3H9" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M16 17L21 12L16 7" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M21 12H9" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    <span>Cerrar Sesión</span>
                </button>
            </div>
        </aside>

        <!-- Contenido Principal -->
        <main class="main-content">
            <!-- Header del Contenido -->
            <header class="content-header">
                <div class="header-content">
                    <div class="header-text">
                        <h1 class="page-title" id="pageTitle">Dashboard</h1>
                        <p class="page-description" id="pageDescription">Bienvenido al panel de maestros</p>
                    </div>
                </div>
            </header>

            <!-- Contenido Dinámico -->
            <div class="content-wrapper">
                <!-- Dashboard -->
                <section class="content-section active" id="dashboard">
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-icon">
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M22 10V6C22 4.9 21.1 4 20 4H4C2.9 4 2 4.9 2 6V10C3.1 10 4 10.9 4 12C4 13.1 3.1 14 2 14V18C2 19.1 2.9 20 4 20H20C21.1 20 22 19.1 22 18V14C20.9 14 20 13.1 20 12C20 10.9 20.9 10 22 10Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                </svg>
                            </div>
                            <div class="stat-content">
                                <h3 class="stat-number" id="totalCourses">0</h3>
                                <p class="stat-label">Cursos Totales</p>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M12 2L2 7L12 12L22 7L12 2Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                    <path d="M2 17L12 22L22 17" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                    <path d="M2 12L12 17L22 12" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                </svg>
                            </div>
                            <div class="stat-content">
                                <h3 class="stat-number" id="totalSeries">0</h3>
                                <p class="stat-label">Series de Talleres</p>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M16 4H18C19.1046 4 20 4.89543 20 6V18C20 19.1046 19.1046 20 18 20H16" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                    <path d="M8 6H4C2.89543 6 2 6.89543 2 8V16C2 17.1046 2.89543 18 4 18H8" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                    <path d="M12 2L12 22" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                </svg>
                            </div>
                            <div class="stat-content">
                                <h3 class="stat-number" id="publishedCourses">0</h3>
                                <p class="stat-label">Cursos Publicados</p>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M12 2L2 7L12 12L22 7L12 2Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                    <path d="M2 17L12 22L22 17" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                    <path d="M2 12L12 17L22 12" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                </svg>
                            </div>
                            <div class="stat-content">
                                <h3 class="stat-number" id="draftCourses">0</h3>
                                <p class="stat-label">Borradores</p>
                            </div>
                        </div>
                    </div>

                    <div class="recent-courses">
                        <h2>Cursos Recientes</h2>
                        <div class="courses-grid" id="recentCoursesGrid">
                            <!-- Los cursos recientes se cargarán dinámicamente -->
                        </div>
                    </div>
                </section>

                <!-- Mis Cursos -->
                <section class="content-section" id="courses">
                    <div class="section-header">
                        <h2>Mis Cursos</h2>
                        <button class="btn-primary" id="addCourseBtn">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M12 5V19" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                <path d="M5 12H19" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                            <span>Crear Nuevo Curso</span>
                        </button>
                    </div>

                    <div class="courses-grid" id="coursesGrid">
                        <!-- Los cursos se cargarán dinámicamente -->
                    </div>
                </section>

                <!-- Crear Curso -->
                <section class="content-section" id="create-course">
                    <div class="course-form-container">
                        <div class="form-header">
                            <h2>Crear Nuevo Curso</h2>
                            <p>Completa la información para crear tu nuevo curso</p>
                        </div>

                        <form id="courseForm" class="course-form">
                            <!-- Información Básica del Curso -->
                            <div class="form-section">
                                <h3>Información Básica</h3>
                                <div class="form-grid">
                                    <div class="form-group">
                                        <label for="courseName">Nombre del Curso *</label>
                                        <input type="text" id="courseName" name="name" required placeholder="Ej: Introducción a la Inteligencia Artificial">
                                    </div>
                                    <div class="form-group">
                                        <label for="courseArea">Área *</label>
                                        <select id="courseArea" name="area" required>
                                            <option value="">Selecciona un área</option>
                                            <option value="ia">Inteligencia Artificial</option>
                                            <option value="datos">Ciencia de Datos</option>
                                            <option value="desarrollo">Desarrollo Web</option>
                                            <option value="desarrollo-movil">Desarrollo Móvil</option>
                                            <option value="desarrollo-juegos">Desarrollo de Juegos</option>
                                            <option value="diseño">Diseño Gráfico</option>
                                            <option value="diseño-web">Diseño Web</option>
                                            <option value="diseño-ui-ux">Diseño UI/UX</option>
                                            <option value="it">IT & Software</option>
                                            <option value="ciberseguridad">Ciberseguridad</option>
                                            <option value="cloud-computing">Cloud Computing</option>
                                            <option value="devops">DevOps</option>
                                            <option value="marketing">Marketing Digital</option>
                                            <option value="marketing-redes">Marketing en Redes Sociales</option>
                                            <option value="seo-sem">SEO & SEM</option>
                                            <option value="negocios">Negocios</option>
                                            <option value="emprendimiento">Emprendimiento</option>
                                            <option value="finanzas">Finanzas Personales</option>
                                            <option value="liderazgo">Liderazgo</option>
                                            <option value="ventas">Ventas</option>
                                            <option value="productividad">Productividad</option>
                                            <option value="idiomas">Idiomas</option>
                                            <option value="musica">Música</option>
                                            <option value="fotografia">Fotografía</option>
                                            <option value="video">Video y Edición</option>
                                            <option value="fitness">Fitness y Salud</option>
                                            <option value="cocina">Cocina</option>
                                            <option value="arte">Arte y Creatividad</option>
                                            <option value="otros">Otros</option>
                                        </select>
                                    </div>
                                    <div class="form-group">
                                        <label for="courseIdentifier">Identificador del Curso</label>
                                        <input type="text" id="courseIdentifier" name="identifier" readonly placeholder="Se generará automáticamente">
                                    </div>
                                    <div class="form-group">
                                        <label for="courseInstructor">Instructor</label>
                                        <input type="text" id="courseInstructor" name="instructor" readonly placeholder="Se llenará automáticamente">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="courseDescription">Descripción del Curso *</label>
                                    <textarea id="courseDescription" name="description" rows="6" required placeholder="Describe detalladamente el contenido, objetivos y beneficios de tu curso"></textarea>
                                </div>
                                
                                <!-- Serie de Talleres -->
                                <div class="form-group">
                                    <label for="courseSeries" class="series-toggle-label">
                                        <svg class="series-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                            <path d="M12 2L2 7L12 12L22 7L12 2Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                            <path d="M2 17L12 22L22 17" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                            <path d="M2 12L12 17L22 12" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                        </svg>
                                        ¿Es parte de una serie de talleres?
                                    </label>
                                    <select id="courseSeries" name="is_series" class="series-toggle-select">
                                        <option value="no">No, es un curso independiente</option>
                                        <option value="yes">Sí, es parte de una serie</option>
                                    </select>
                                </div>
                                
                                <!-- Contenedor de Series de Talleres -->
                                <div id="seriesOptions" class="series-container" style="display: none;">
                                    <div class="series-header">
                                        <h4 class="series-title">
                                            <svg class="series-icon" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                <path d="M12 2L2 7L12 12L22 7L12 2Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                                <path d="M2 17L12 22L22 17" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                                <path d="M2 12L12 17L22 12" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                            </svg>
                                            Configuración de Serie de Talleres
                                        </h4>
                                        <p class="series-subtitle">Organiza tu curso como parte de una serie estructurada</p>
                                    </div>
                                    
                                    <!-- Opciones de Serie -->
                                    <div class="series-options">
                                        <div class="series-option-card">
                                            <div class="series-option-header">
                                                <h5>Buscar Serie Existente</h5>
                                                <p>Selecciona una serie que ya hayas creado</p>
                                            </div>
                                            <div class="form-group">
                                                <select id="seriesSearch" name="existing_series" class="series-select">
                                                    <option value="">Selecciona una serie existente</option>
                                                </select>
                                            </div>
                                        </div>
                                        
                                        <div class="series-option-divider">
                                            <span>o</span>
                                        </div>
                                        
                                        <div class="series-option-card">
                                            <div class="series-option-header">
                                                <h5>Crear Nueva Serie</h5>
                                                <p>Define una nueva serie de talleres</p>
                                            </div>
                                            <button type="button" class="btn-create-series" id="createNewSeriesBtn">
                                                <svg class="btn-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                    <path d="M12 5V19" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                                    <path d="M5 12H19" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                                </svg>
                                                Crear Nueva Serie
                                            </button>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Formulario de Nueva Serie -->
                                <div id="newSeriesForm" class="new-series-form" style="display: none;">
                                    <div class="series-form-header">
                                        <h4>Nueva Serie de Talleres</h4>
                                        <p>Define los detalles de tu nueva serie</p>
                                    </div>
                                    
                                    <div class="form-grid">
                                        <div class="form-group">
                                            <label for="seriesName" class="required-label">
                                                <span class="label-text">Nombre de la Serie</span>
                                                <span class="required-mark">*</span>
                                            </label>
                                            <input type="text" id="seriesName" name="series_name" required 
                                                   placeholder="Ej: Masterclass Completa de Inteligencia Artificial" 
                                                   class="series-input">
                                            <small class="input-hint">Nombre descriptivo para identificar la serie</small>
                                        </div>
                                        
                                        <div class="form-group">
                                            <label for="seriesDescription" class="required-label">
                                                <span class="label-text">Descripción de la Serie</span>
                                                <span class="required-mark">*</span>
                                            </label>
                                            <textarea id="seriesDescription" name="series_description" rows="4" required
                                                      placeholder="Describe el objetivo general, estructura y beneficios de la serie completa"
                                                      class="series-textarea"></textarea>
                                            <small class="input-hint">Explica qué aprenderán los estudiantes en toda la serie</small>
                                        </div>
                                        
                                        <div class="form-group">
                                            <label for="workshopNumber" class="required-label">
                                                <span class="label-text">Número de Taller en la Serie</span>
                                                <span class="required-mark">*</span>
                                            </label>
                                            <input type="number" id="workshopNumber" name="workshop_number" min="1" max="99" required
                                                   placeholder="Ej: 1" class="series-input">
                                            <small class="input-hint">Posición de este curso en la secuencia de la serie</small>
                                        </div>
                                        

                                    </div>
                                    
                                    <div class="series-form-actions">
                                        <button type="button" class="btn-cancel-series" id="cancelSeriesBtn">
                                            Cancelar Serie
                                        </button>
                                        <button type="button" class="btn-save-series" id="saveSeriesBtn">
                                            <svg class="btn-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                <path d="M19 21H5C4.46957 21 3.96086 20.7893 3.58579 20.4142C3.21071 20.0391 3 19.5304 3 19V5C3 4.46957 3.21071 3.96086 3.58579 3.58579C3.96086 3.21071 4.46957 3 5 3H19C19.5304 3 20.0391 3.21071 20.4142 3.58579C20.7893 3.96086 21 4.46957 21 5V19C21 19.5304 20.7893 20.0391 20.4142 20.4142C20.0391 20.7893 19.5304 21 19 21Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                                <path d="M16 3V7" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                                <path d="M8 3V7" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                                <path d="M3 11H21" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                            </svg>
                                            Guardar Serie
                                        </button>
                                    </div>
                                </div>
                            </div>

                            <!-- Imagen del Curso -->
                            <div class="form-section">
                                <h3>Imagen del Curso</h3>
                                <div class="form-group">
                                    <label for="courseImage">Imagen del Curso</label>
                                    <div class="image-upload-container">
                                        <input type="file" id="courseImage" name="image" accept="image/*">
                                        <div class="upload-placeholder">
                                            <svg width="48" height="48" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                <path d="M21 19V5C21 3.9 20.1 3 19 3H5C3.9 3 3 3.9 3 5V19C3 20.1 3.9 21 5 21H19C20.1 21 21 20.1 21 19ZM8.5 13.5L11 16.51L14.5 12L19 18H5L8.5 13.5Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                            </svg>
                                            <p>Haz clic para subir una imagen</p>
                                            <span>PNG, JPG hasta 5MB</span>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Acciones del Formulario -->
                            <div class="form-actions">
                                <button type="button" class="btn-secondary" id="cancelFormBtn">Cancelar</button>
                                <button type="submit" class="btn-primary">Crear Curso</button>
                            </div>
                        </form>
                    </div>
                </section>
            </div>
        </main>
    </div>

    <!-- Scripts -->
    <script src="scripts/navigation-clean.js"></script>
</body>
</html>