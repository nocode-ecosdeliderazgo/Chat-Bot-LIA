<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Cuestionario | Aprende y Aplica IA</title>
    <!-- Supabase config (igual que en login/new-auth.html) -->
    <meta name="supabase-url" content="https://miwbzotcuaywpdbidpwo.supabase.co">
    <meta name="supabase-key" content="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1pd2J6b3RjdWF5d3BkYmlkcHdvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQ2MTEyMjksImV4cCI6MjA3MDE4NzIyOX0.IKXYAe1JBFc_pcaS6OjxKUVJePwnfHgc0sRO6WpJSBY">
    <link rel="icon" type="image/png" href="../assets/images/icono.png" />
    <link rel="stylesheet" href="../styles/main.css" />
    <link rel="stylesheet" href="../styles/components.css" />
    <link rel="stylesheet" href="form.css" />
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500&family=Montserrat:wght@700;800&display=swap" rel="stylesheet">

    <!-- Global Theme Setup -->
    <script src="../scripts/global-theme-setup.js"></script>
</head>
<body class="bg-glow-global">
    <div class="particles-container"></div>

    <!-- Bot√≥n de cambio de tema -->
    <button class="theme-toggle-btn" title="Cambiar tema">
        <svg class="theme-icon-sun" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="5"></circle>
            <line x1="12" y1="1" x2="12" y2="3"></line>
            <line x1="12" y1="21" x2="12" y2="23"></line>
            <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
            <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
            <line x1="1" y1="12" x2="3" y2="12"></line>
            <line x1="21" y1="12" x2="23" y2="12"></line>
            <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
            <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
        </svg>
        <svg class="theme-icon-moon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
        </svg>
    </button>

    <header class="quiz-header">
        <div class="quiz-header-left">
            <button class="header-profile" onclick="toggleProfileMenu(event)">
                <img src="../assets/images/icono.png" alt="Perfil" />
            </button>
            <button class="header-stats" onclick="location.href='../estadisticas.html'">
                <i class='bx bx-bar-chart-alt-2'></i>
                <span>Mis Estad√≠sticas</span>
            </button>
        </div>
        <div id="profileMenu" class="profile-menu" style="display:none">
            <div class="pm-section">
                <div class="pm-item" onclick="location.href='../estadisticas.html'"><i class='bx bx-bar-chart-alt-2'></i> Mis Estad√≠sticas</div>
                <div class="pm-item" onclick="location.href='../index.html'"><i class='bx bx-log-out'></i> Cerrar sesi√≥n</div>
            </div>
        </div>
    </header>

    <main class="quiz-main">
        <section class="quiz-card animate-on-scroll">
            <div class="quiz-header-info">
                <h1 id="quizTitle">Cuestionario</h1>
                <p id="quizSubtitle">Este cuestionario contiene 25 preguntas y su duraci√≥n aproximada es de 8 a 10 minutos.</p>
            </div>

            <form id="quizForm" class="quiz-form">
                <div id="questionList" class="question-list"></div>

                <div class="quiz-actions">
                    <button id="submitQuiz" class="btn-primary btn-large" type="button">Guardar y finalizar</button>
                </div>
            </form>
        </section>
    </main>

    <script src="../scripts/supabase-client.js"></script>
    <script src="form.js"></script>
    <script src="../scripts/profile-avatar-manager.js"></script>

    <!-- Script de funcionalidad del bot√≥n de tema -->
    <script>
        function toggleTheme() {
            console.log('üîÑ Cambiando tema...');
            const currentTheme = document.documentElement.getAttribute('data-theme') || 'dark';
            const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
            document.documentElement.setAttribute('data-theme', newTheme);
            localStorage.setItem('theme', newTheme);
            console.log('‚úÖ Tema cambiado a:', newTheme);
        }
        window.toggleTheme = toggleTheme; // Make it globally available
        document.addEventListener('DOMContentLoaded', function() {
            const savedTheme = localStorage.getItem('theme') || 'dark';
            document.documentElement.setAttribute('data-theme', savedTheme);
            console.log('üé® Tema inicial aplicado:', savedTheme);
            const themeBtn = document.querySelector('.theme-toggle-btn');
            if (themeBtn) {
                themeBtn.removeAttribute('onclick'); // Remove inline onclick
                themeBtn.addEventListener('click', function(e) {
                    e.preventDefault();
                    e.stopPropagation();
                    console.log('üñ±Ô∏è Bot√≥n de tema clickeado');
                    toggleTheme();
                });
                console.log('‚úÖ Evento de click agregado al bot√≥n de tema');
            } else {
                console.error('‚ùå No se encontr√≥ el bot√≥n de tema');
            }
        });
        console.log('üîß Script de tema cargado');
        setTimeout(() => {
            const btn = document.querySelector('.theme-toggle-btn');
            if (btn) {
                console.log('‚úÖ Bot√≥n encontrado:', btn);
                console.log('‚úÖ Funci√≥n toggleTheme disponible:', typeof toggleTheme);
            } else {
                console.error('‚ùå Bot√≥n no encontrado');
            }
        }, 1000);
    </script>
</body>
</html>


